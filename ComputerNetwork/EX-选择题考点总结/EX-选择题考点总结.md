# EX-选择题考点总结

## 第一章 计算机网络体系结构

### 【考纲内容】

1.   计算机网络概述
     +   计算机网络的概念、组成与功能
     +   计算机网络的分类
     +   计算机网络的性能指标
2.   计算机网络体系结构与参考模型
     +   计算机网络分层结构
     +   计算机网络协议、接口、服务的概念
     +   $ISO/OSI$参考模型和$TCP/IP$模型

### 【复习提示】

+   本章主要介绍计算机网络体系结构的基本概念，读者可以在理解的基础上适当地记忆
+   重点掌握网络的分层结构
    +   包括$5$层和$7$层结构
    +   尤其是$ISO/OSI$参考模型各层的功能及相关协议、 接口和服务等概念
+   掌握有关网络的各种性能指标，特别是时延、带宽、速率和吞吐量等的计算。

### 选择题考点总结

1.   计算机网络概念：计算机网络就是一些互连的、自治的计算机系统的集合

2.   计算机组成

     1.   从组成部分上看：硬件、软件、协议。
     2.   从工作方式上看：边缘部分、核心部分
     3.   从功能组成上看：通信子网、资源子网
          1.   **通信子网**由各种传输介质、 通信设备和相应的网络协议组成，它使网络具有数据传输、交换、控制和存储的能力， 实现联网计算机之间的数据通信
               + 对应于$OSI$参考模型的下三层，包括物理层、数据链路层和网络层
          2.   **资源子网**是实现资源共享功能的设备及其软件的集合，向网络用户提供共享其他计算机上的硬件资源、软件资源和数据资源的服务
               + 对应于$OSI$参考模型的上三层，包括会话层、表示层、应用层

3.   计算机网络功能：数据通信，资源共享，分布式处理，信息综合处理，提高可靠性，负载均衡

     +   计算机网络的三大主要功能是数据通信、资源共享及分布式处理。
     +   最基本功能是数据通信

4.   计算机网络分类

     1.   按分布范围分类：广域网$WAM$，城域网$MAN$，局域网$LAN$（广播技术），个人区域网$PAN$
          +   广域网是因特网的核心部分
          +   城域网大多采用以太网技术
          +   若中央处理器之间的距离非常近（如仅1m的数量级或甚至更小），则一般称为多处理器系统，而不称为计算机网络
     2.   按传输技术分类：广播式、点对点式。

          + 局域网基本上都采用广播式通信技术，广域中的无线、卫星通信网络也采用广播式通信技术。
          + 广播式网络共享广播信道，如总线，通常是局域网的一种通信方式（局域网工作在数据链路层），因此不需要网络层，因而也不存在路由选择问题，但数据链路层使用物理层的服务必须通过服务访问点实现
     3.   按使用者分类：公用网、专用网。
     4.   按交换技术分类：电路交换、报文交换、分组交换。
          +   分组交换传输方式：数据报方式和虚电路方式
     5.   按拓扑结构分类：总线、星型、环型、网状。

          1.   总线形网络：优点是建网容易、增/减结点方便、节省线路，缺点是重负载时通信效率不高、总线任意一处对故障敏感。
          2.   星形网络：用一个结点作为中心结点，其他$n-1$个结点直接与中心结点相连构成的网络，便于集中控制和管理，因为端用户之间的通信必须经过中央设备，缺点是成本高、中央设备对故障敏感。中心结点既可以是文件服务器，也可以是连接设备，常见的中心结点为集线器。
          3.   环形网络：最典型的例子是令牌环局域网，环可以是单环，也可以是双环，环中信号是单向传输的
          4.   网状网络：每个结点至少有两条路径与其他结点相连，多用在广域网中。有规则型和非规则型两种。其优点是可靠性高，缺点是控制复杂、线路成本高。

5.   ※性能指标

     1.   带宽：网络中某点到另外一点所能通过的**最高数据率**，单位是比特每秒`b/s`，即网络设备发送的极限最高速率约束。
     2.   时延：是数据从网络的一端传送到另一端所需要的时间，单位为秒`s`
          +   总时延=发送时延+传播时延+排队时延+处理时延。排队时延和处理时延一般可忽略不计（除非题目另有说明）
              +   发送时延：从发送分组的第一个比特开始到最后一个比特发送完毕的时间
                  +   发送时延=数据长度$\div$信道带宽（发送速率）
              +   传播时延：数据在信道上传播的时间
                  +   传播时延=信道长度$\div$电磁波传播速率。
              +   排队时延：等待输入与输出链路可用的时间。
              +   处理时延：检错数据与查找转发出口的时间。
          +   对于高速链路，提高的仅是数据发送速率而非比特在链路上的传播速率，提高数据的发送速率只是为了减少数据的发送时延。
     3.   时延带宽积：发送端发送的第一个比特即将到达终点时，发送端已经发出了多少个比特，因此又称以比特为单位的**链路长度**
          +   时延带宽积=传播时延$\times$带宽，单位为`bit`
     4.   往返时延$RTT$：从发送方发送数据开始，到发送方收到接收方的确认总共经历的时延。
          +   $RTT$=往返传播时延+末端处理时延。
     5.   吞吐量：单位时间内通过某网络或信道接口的数据量，单位是$b/s$等。这是网络实际的平均速率。吞吐量受网络带宽的限制。
     6.   比特率/数据传输率：主机在数字信道上传输数据位数的额定理想速度。单位为每秒比特数`bit/s(bps)`
     7.   波特率：指数据信号对载波的调制速率，它用单位时间内载波调制状态改变次数来表示，其单位为波特`Baud`。
          +   波特率与比特率有这样的换算关系：`1 Baud = log2M (bit/s)`，其中M是信号的编码级数。
     8.   信道利用率：有数据通过时间$\div$（有+无）数据通过时间。
     9.   网络利用率：信道利用率加权平均值。

6.   计算机网络体系结构

     1.   分层结构概念：别大意，考过概念

          1.   实体：第$n$层中的活动元素称为$n$层实体，同一层的实体就是对等实体。

          2. 协议：为进行网络中的对等实体数据交换而建立的规则、标准或约定，是水平方向的。

              1.   协议由语法、语义和同步三部分组成
                   + 语法：语法规定了通信双方彼此“如何讲”， 即规定了传输数据的格式。
                   + 语义：语义规定了通信双方彼此“讲什么”，即规定了所要完成的功能，如需要发出何种控制信息、完成何种动作及做出何种应答
                   + 时序/同步：规定执行各种操作的条件、时序关系等，即事件实现顺序的详细说明

              2.   一个完整的协议通常应具有线路管理（建立、释放连接）、差错控制、数据转换等功能。

          3. 接口：接口是同一结点内相邻两层间交换信息的连接点，是一个系统内部的规定。

              + 上层使用下层服务的入口。
              + 接口连接的是相邻层次。
              + 在典型的接口上，同一结点相邻两层的实体通过访问服务点$SAP$进行交互
                  + 服务是通过$SAP$提供给上层使用的，第$n$层的$SAP$就是第$n+1$层可以访问第$n$层服务的地方
                  + 每个$SAP$都有一个能够标识它的地址

          4. 服务：下层为相邻上层提供的功能调用，是垂直方向的。

              + 上层使用下层提供的服务。
              + 第$n$层向$n+1$层提供服务时，不仅包括第$n$层本身的功能，还包括下面所有层次所提供的所有功能。
                  + 最低层只提供服务，是整个层次结构的基础
                  + 中间各层既是下一层的服务使用者，又是上一层的服务提供者
                  + 最高层面向用户提供服务
              + 上一层只能通过相邻层间的接口使用下一层的服务，而不能调用其他层的服务
                  + 下一层所提供服务的实现细节对上一层透明
              + 两台主机通信时，对等层在逻辑上有一条直接信道，表现为不经过下层就把信息传送到对方
              + 并非在一层内完成的全部功能都称为服务，只有那些能够被高一层实体“看得见”的功能才称为服务。
              + 上层使用下层所提供的服务时必须与下层交换一些命令，这些命令在$OSI$参考模型中称为**服务原语**
              + 服务类型：
                  1.   面向连接服务与无连接服务。
                  2.   可靠服务和不可靠服务。
                       1.   可靠服务是指网络具有纠错、检错、应答机制，能保证数据正确、可靠地传送到目的地
                       2.   不可靠服务是指网络只是尽量正确、可靠地传送，而不能保证数据正确、可靠地传送到目的地，是一种尽力而为的服务
                       3.   对于提供不可靠服务的网络，其网络的正确性、可靠性要由应用或用户来保障
                            +   例如，用户收到信息后要判断信息的正确性，如果不正确，那么用户要把出错信息报告给信息的发送者，以便发送者采取纠正措施
                            +   通过用户的这些措施，可以把不可靠的服务变成可靠的服务
                  3.   有应答服务和无应答服务
                       1.   有应答服务是指接收方在收到数据后向发送方给出相应的应答，该应答由传输系统内部自动实现，而不由用户实现。例如，文件传输服务就是一种有应答服务
                            +   所发送的应答既可以是肯定应答，也可以是否定应答，通常在接收到的数据有错误时发送否定应答。
                       2.   无应答服务是指接收方收到数据后不自动给出应答。若需要应答，则由高层实现。例如，对于$WWW$服务，客户端收到服务器发送的页面文件后不给出应答。

          5. $n+1$层的$PDU$作为第$n$层的$SDU$，在加上本层的$PCI$就变成了本层的$PDU$，然后交给$n-1$层后作为$SDU$发送，即
              $$
              SDU_{n}+PCI_{n}=PDU_{n}=SDU_{(n-1)}
              $$

              1.   $SDU$服务数据单元：为完成用户所要求的功能而应传输的数据，即要传输的目的数据。通俗来讲就是你这层收到的东西

              2.   $PCI$协议控制信息：控制协议操作的信息，即协议控制头。通俗来讲就是你这层要加的东西

              3.   $PDU$协议数据单元：对等层次之间传送的数据单位。通俗来讲就是你这层要传的东西

     2.   ※※※OSI参考模型：三种参考模型之一，几乎必考（五层参考模型也直接写这了）

          1.   物理层：在物理媒体上为数据端设备透明地传输原始比特流，物理层的传输单位是比特。解决使用何种比特来解决传输的问题（如何选物流车）
               1.   物理层接口标准：$EIARS.232.C、ADSL$和$SONET/SDH$等
               2.   物理层的接口特性

                    1.   **机械特性：** 指明接口所用接线器的规格、形状和尺寸、引脚数目和排列、固定和锁定装置等。

                    2.   **电气特性：** 指明在接口电缆的各条线上出现的电压范围、阻抗匹配、传输速率、距离限制。

                    3.   **功能特性：** 指明某条线上出现某一电平的电平意义、接口部件的用途。

                    4.   **规程特性/过程特性：** 指明对于不同功能的各种可能事件的出现顺序，即工作规程和时序的关系。
          2.   数据链路层：据链路层的功能可以概括为物理寻址、数据重发、封装成帧、差错控制、流量控制和传输管理等。 解决分层在一个网络或一段链路上传输的问题（如何运输）
               1.   典型的数据链路层协议有**自动重传协议**$ARQ$（**停止-等待协议**$SW$、**后退$N$帧协议**$GBN$、**选择重传协议**$SR$），**$ALOHA$协议**（**纯$ALOHA$协议**、**时隙$ALOHA$协议**），**$CSMA$协议**（**坚持$CSMA$**、**非坚持$CSMA$**、**$p-$坚持$CSMA$**），**$CSMA/CD$协议**，**$CSMA/CA$协议**，**$*HDLC$协议**，**轮询协议**，**令牌传递协议**，**$MAC$协议**，**广域网$PPP$协议**
               2.   数据链路层的传输单位是帧，任务是将网络层传来的$IP$数据报组装成帧
               3.   广播式网络在数据链路层还要处理新的问题，即如何控制对共享信道的访问。数据链路层的一个特殊的子层即**介质访问子层**，就是专门处理这个问题的。 
          3.   网络层：主要任务是把网络层的协议数据**单元/分组**从源端传到目的端，为分组交换网上的不同主机提供通信服务。解决分组在多个网络上**传输/路由**的问题（如何分拣）
               1.   网络层的协议有$IP$协议，**网络地址转换协议**$NAT$，地址解析协议$ARP$，**网际控制报文协议**$DHCP$，**网际组管理协议**$IGMP$，组播路由协议，以及应用层的**动态主机配置协议**$DHCP$，应用层的**路由信息协议**$RIP$，网络层/传输层的**开放最短路径优先协议**$OSPF$
               2.   关键问题是对分组进行路由选择，并实现流量控制、拥塞控制、差错控制和网际互连等功能。 
          4.   运输层/运输层：为端到端连接提供可靠的传输服务，为端到端连接提供流量控制、差错控制、服务质量、数据传输管理等服务。 解决进程之间基于网络的通信问题（如何派件）
               1.   传输层的协议有传输控制协议$TCP$，用户数据报协议$UDP$
               2.   传输单位是报文段$TCP$或用户数据报$UDP$
               3.   数据链路层提供的是**点到点**的通信，传输层提供的是**端到端**的通信，两者不同
               4.   使用传输层的服务，高层用户可以直接进行端到端的数据传输，从而忽略通信子网的存在。
               5.   通过传输层的屏蔽，高层用户看不到子网的交替和变化。由于一台主机可同时运行多个进程，因此传输层具有复用和分用的功能
                    +   复用是指多个应用层进程可同时使用下面传输层的服务
                    +   分用是指传输层把收到的信息分别交付给上面应用层中相应的进程
          5.   会话层：负责管理主机间的会话进程，包括建立、管理及终止进程间的会话
               1.   会话层可以使用校验点使通信会话在通信失效时从校验点继续恢复通信，实现数据同步
               2.   会话层利用传输层提供的端到端的服务， 向表示层提供它的增值服务，这种服务主为表示层实体或用户进程建立连接并在连接上有序地传输数据，这就是**会话**，也称**建立同步$SYN$**
          6.   表示层：主要处理在两个通信系统中交换信息的表示方式。
               +   不同机器采用的编码和表示方法不同，使用的数据结构也不同，为了使不同表示方法的数据和信息之间能互相交换，表示层采用抽象的标准方法定义数据结构，并采用标准的编码形式。数据压缩、加密和解密也是表示层可提供的数据表示变换功能。
          7.   应用层：解决通过应用进程的交互来实现特定网络应用的问题（如何售后）
               1.   应用层是用户与网络的界面，应用层为特定类型的网络应用提供访问OSI参考模型环境的手段
               2.   典型的协议有**文件传送协议$FTP$，简单文件传送协议$TFTP$，远程终端协议$TELNET$，超文本传输协议$HTTP$，简单邮件传送协议$SMTP$，多用途网际邮件扩充$MIME$，邮局协议$POP3$，网际报文存取协议$IMAP$，动态主机配置协议$DHCP$**

     3.   ※$TCP/IP$参考模型：先有协议栈才有参考模型。

          1.   网络接口层：作用是从主机或结点接收$IP$分组，并把它们发送到指定的物理网络上，对应$OSI$参考模型中的物理层和数据链路层。
          2.   网际层：将分组发往任何网络，并为之独立地选择合适的路由，但它不保证各个分组有序地到达，各个分组的有序交付由高层负责。网际层定义了标准的分组格式和协议，即$IP$和$IP$协议。支持主机到主机的通信。
          3.   传输层：和$OSI$参考模型中的传输层类似，即使得发送端和目的端主机上的对等实体进行会话。支持应用到应用的通信或进程到进程的通信。
          4.   应用层：对应$OSI$参考模型中的会话层、 表示层和应用层。

     4.   $TCP/IP$模型与$OSI$参考模型的比较

          1.   $TCP/IP$模型与$OSI$参考模型有许多相似之处

               1.   二者都采取分层的体系结构，将庞大且复杂的问题划分为若干较容易处理的、范围较小的问题，而且分层的功能也大体相似
               2.   二者都是基于独立的协议栈的概念
               3.   二者都可以解决异构网络的互连，实现世界上不同厂家生产的计算机之间的通信。
          2.   两个模型除具有这些基本的相似之处外，也有很多差别：

               1.   $OSI$参考模型的最大贡献就是精确地定义了三个主要概念：服务、协议和接口，这与现代的面向对象程序设计思想非常吻合；而$TCP/IP$模型在这三个概念上却没有明确区分，不符合软件工程的思想。

               2.   $OSI$参考模型产生在协议发明之前，没有偏向于任何特定的协议，通用性良好，虽然设计者在协议方面没有太多经验，不知道把哪些功能放到哪一层更好；$TCP/IP$模型正好相反，首先出现的是协议，模型实际上是对已有协议的描述，因此不会出现协议不能匹配模型的情况，但该模型不适合于任何其他非$TCP/IP$的协议栈。 

               3.   $TCP/IP$模型在设计之初就考虑到了多种异构网的互连问题，并将网际协议$IP$作为一个单独的重要层次；$OSI$参考模型最初只考虑到用一种标准的公用数据网将各种不同的系统互连，$OSI$参考模型认识到$IP$的重要性后，只好在网络层中划分出一个子层来完成类似于$TCP/IP$模型中的$IP$的功能。

               4.   ※$OSI$参考模型在网络层支持无连接和面向连接的通信，但在传输层仅有面向连接的通信；而$TCP/IP$模型认为可靠性是端到端的问题，因此它在网际层仅有一种无连接的通信模式， 但传输层支持无连接和面向连接两种模式

## 第二章 物理层

### 【考纲内容】

1.   通信基础
     +   信道、信号、带宽、码元、波特、速率、信源与信宿等基本概念
     +   奈奎斯特定理与香农定理
     +   编码与调制
     +   电路交换、报文交换与分组交换
     +   数据报与虚电路
2.   传输介质
     +   双绞线、同轴电缆、光纤与无线传输介质
     +   物理层接口的特性
3.   物理层设备
     +   中继器
     +   集线器

### 【复习提示】

+   物理层考虑的是怎样才能在连接各台计算机的传输媒体上传输数据比特流，而不是指具体的传输媒体
+   本章概念较多，易出选择题，且涉及一些通信原理，读者不太明白的地方可以参考一些相关书籍，通信部分的内容也并非考研重点
+   复习时应抓住重点，如奈奎斯特定理和香农定理的应用、编码与调制技术、数据交换方式，以及电路交换、报文交换与分组交换技术等。

### 选择题考点总结

1.   基本概念：

     1.   数据和信号：数据是指传送信息的实体；信号则是数据的电气或电磁表现，是数据在传输过程中的存在形式
          1.   数据和信号都可用“模拟的”或“数字的”来修饰：
               1.   连续变化的数据/信号称为模拟数据/模拟信号
               2.   取值仅允许为有限的几个离散数值的数据/信号称为数字数据/数字信号
     2.   信源、信道与信宿：信源是产生和发送数据的源头，通常是计算机或其他数字终端装置；信宿是接受数据的终点，通常是计算机或其他数字终端装置；信道是信号的传输媒介。
          1.   信道分类：按传输信号形式的不同：模拟信道、数字信道；按传输介质的不同：有线信道、无线信道。
          2.   信道上传送的信号有基带信号和宽带信号之分：基带信号将数字信号1和0直接用两种不同的电压表示，然后送到数字信道上传输；宽带信号将基带信号进行调制后形成频分复用模拟信号，然后送到模拟信道上传输
          3.   通信过程：信源$\to$数字信号$\to$调制解调器$\to$模拟信号$\to$广域网$\to$模拟信号$\to$调制解调器$\to$数字信号$\to$信宿。
     3.   通信方式
          1.   单工通信：只能单方面通信，只需一条信道。
          2.   半双工通信：能发送和接受，但是任何一方都不能同时发送和接收信息，需要两条信道。
          3.   全双工通信：都能发送与接受，需要两条信道。
     4.   信号类型
          1.   基带传输：将数字信号直接用两种不同的电压表示，不用调制，直接送到数字信道上传输。传输媒体整个带宽都被基带信号占用。适用于近距离传输，通常用于局域网等场景。
          2.   频带传输：将基带信号对特定频率的载波进行调制后进行的频分复用模拟信号，再传输到模拟信道上传输。适用于远距离传输，通常与无线传输相关。可以解决电话系统传输数字信号的问题，同时可以实现多路复用技术。
          3.   宽带传输：基于频带传输，使用频分复用等技术将链路容量分解为两个或多个信道，每个信道可以携带不同的信号。信道之间互不干扰，提高传输效率，可以同时传输多路信号。适用于高速远距离传输，如宽带互联网等。宽带传输在频带传输的基础上实现了信号的分隔传输，每个信道可独立传输不同的信息。宽带传输提供了更高的传输带宽和更高的传输速率

2.   传输单位

     1.   码元：指用一个固定时长的信号波形（数字脉冲）表示一位$k$进制数字，代表不同离散数值的基本波形，是数字通信中数字信号的计量单位，这个时长内的信号称为左进制码元，而该时长称为码元宽度
          +   一个码元所携带的信息量是不固定的，是由调制方式和编码方式决定的
     2.   波特/波特率$Baud/B$：指一秒可以传输多少个码元/电平，即单位时间内脉冲个数或信号变化的次数，一波特就是一码元一秒。等于每秒可以发生的信号变化次数
          +   波特率=比特率$\div$每码元所含比特数
     3.   比特率/信息传输速率：就是我们平常说的网速，用字母$R$表示，单位为比特每秒$bps$。
          +   $R=B\times\log_2(V)$，$V$表示每个码元离散电平的数目
     4.   带宽：网络中某点到另外一点所能通过的**最高数据率**，单位是比特每秒`b/s`，即网络设备发送的极限最高速率约束。
          +   若某信道每$\dfrac{1}{n}s$采样一次，则信道带宽为$n\;Hz$

3.   ※※传输准则：奈式准则（避免码间串扰限制波特率）和香农定理（不产生误差情况下的比特率）

     1.   奈式准则/奈奎斯特定理：规定避免**码间串扰**的低通信道最高码元传输速率。说明了具体的信道所能通过的频率范围总是有限的

          1.   码间串扰：信号中的许多高频分量往往不能通过信道， 否则在传输中会衰减，导致接收端收到的信号波形失去码元之间的清晰界限，这种现象称为**码间串扰**

          2.   在理想低通条件下，避免码间串扰：
               $$
               B=2W\\
               R=2W\log_2V
               $$
               其中

               +   $B$表示理想低通信道下的极限波特率
               +   $R$表示理想低通信道下的极限比特率，$R=B\times\log_2(V)$
               +   $W$是理想低通信道（没有噪声、带宽有限）的带宽，全部计算机网络中涉及电子通信领域的就奈式准则和香农定理这两个公式，只有这两个公式中带宽的单位是$Hz$
               +   $V$表示每个码元离散电平的数目
                   +   码元的离散电平数目是指有多少种不同的码元，比如有16种不同的码元，则需要4个二进制位，因此数据传输速率是码元传输速率的4倍
                   +   $n$个幅值的$ASK$调制：说明有$n$个相位，即$V=n$

          3.   对于奈氏准则，可以得出以下结论：

               1.   由于码元的传输速率受奈氏准则的制约，但并未对信息传输速率给出限制，就必须设法使每个码元能携带更多的个比特量的信息，这就需要多元制的调制方法。
               2.   在任何信道中，波特率是有上限的，若传输速率超过此上限，就会出现严重的码间串扰问题，使得接收端不可能完全正确识别码元。
               3.   信道的频带越宽（即通过的信号高频分量越多），就可用更高的速率进行码元的有效传输。

     2.   香农$Shannon$定理：香农定理规定了带宽受限且有高斯白噪声干扰的信道的极限**信息传输速率/比特率**，当用此速率进行传输时，可以做到不产生误差

          1.   香农定理定义为
               $$
               R=Wlog_2{(1+S/N)}
               $$
               其中

               +   $R$表示信道的极限比特率，$W$是信道的带宽，说明同上

               +   $S/N$表示$\frac{S}{N}$，纯数值无单位，408考试中一般有两种表现形式：

                   1.   直接给出$S/N$的比值，其中$S$为信道所传输信号的平均功率，$N$为信道内部的高斯噪声功率，单位均为瓦特$W$
                                  2.   给出$SNR$信噪比，单位是分贝$dB$，计算公式如下，根据$SNR$求出$S/N$代入香农公式计算即可
                        $$
                        SNR=10\cdot\log_{10}{\dfrac{S}{N}}
                        $$

          2.   对于香农定理，可以得出以下结论：

               1.   信道的带宽或信道中的信噪比越大（信号功率较大噪声功率较小），信息的极限传输速率越高。
               2.   对一定的传输带宽和一定的信噪比，信息传输速率的上限是确定的。
               3.   只要**信息传输速率/比特率**低于信道的极限传输速率，就能找到某种方法来实现无差错的传输。
               4.   香农定理得出的是理想条件下的极限**信息传输速率/比特率**，实际信道能达到的传输速率要比它低不少。 

            2.   奈氏准则与香农定理

                 1.   当没有给信噪比的条件就只能使用奈氏准则，而如果当给出了信噪比与码元种数时，就需要同时使用奈氏准则与香农定理，然后取较小值作为答案。
                 2.   奈氏准则指出，**最高码元传输速率/波特率**是受限的，不能任意提高，否则接收端就不能正确判定码元所携带的比特是$1$还是$0$，因为存在码元之间的相互干扰
                 3.   奈氏准则是在理想条件下推导出来的，在实际条件下，**最高码元传输速率/波特率**要比理想条件下得出的数值小很多，电信技术人员的任务就是要在实际条件下，寻找出较好的传输码元波形，将比特转换为较为合适的传输信号。
                 4.   需要注意的是，奈氏准则并未限制信息传输速率。
                 5.   香农定理告诉我们，若要得到无限大的**信息传输速率/比特率**，只有两个办法
                      1.   要么使用无限大的传输带宽（显然不可能)
                      2.   要么使信号的信噪比无限大，即采用没有噪声的传输信道或使用无限大的发送功率（显然这也不可能）。

4.   编码和调制

     1.   数字数据**编码**为数字信号：数字数据通过**数字发送器**转换为数字信号。

          1.   归零编码$RZ$：折$1$平$0$，信号电平在一个码元内都要恢复到$0$，信道使用率低，基本上都是无使用。

          2.   非归零编码$NRZ$：高$1$低$0$，没有检错功能，却无法判断一个码元的开始与结束从而很难保持收发双方的同步。

               +   无法传递时钟信号，双方难以同步，因此若想传输高速同步数据， 则需要都带有时钟线

          3.   反向非归零编码$NRZI$：折$0$平$1$，信号电平翻转表示$0$，不变表示$1$。

               +   翻转的信号本身可以作为一种通知机制，能传输时钟信号

               +   对于全$1$的数据同步效果不好。
               +   $USB 2.0$通信的编码方式就是$NRZI$编码

          4.   曼彻斯特编码：前高后低为$1$，前低后高为$0$。或者记为中间往上跳为$0$，中间往下降为$1$。题目也可以采用相反的规定

               +   每一个码元中间都会产生电平跳变，所以中间的跳变既可以作为时钟信号用于同步，也可以用于数据信号
               +   但是其占有的频带宽度是原基带宽度的两倍，且因为每一个码元被调制为两个电平，所以数据传输速率只有调制速率的一半。
               +   以太网使用的编码方式就是曼彻斯特编码，因此以太网的波特率是数据率的两倍

          5.   差分曼彻斯特编码：同$1$异$0$。每个码元中间同样有电平跳变可用于同步。可以实现自同步，抗干扰性也强于曼彻斯特编码。

          6.   $4B/5B$编码

               +   $4$位码转换为$5$位码，比特流中插入额外的比特来打断一连串的$0$或$1$，编码效率为$80\%$

               +   只采用$16$种对应$16$种不同的位码，其他$16$种作为控制码，控制帧开始与结束以及线路状态等或保留。

     2.   模拟数据到数字信号：因为计算机内部都是二进制数据，如处理的是数字音频，所以需要将模拟声音通过采样、量化转换位有限个数字表示的离散序列，这就是**音频数字化**。

          1.   抽样：对模拟信号周期性扫描，把时间上连续的信号变为时间上的离散信号
               +   采样频率遵循采样定理：当采样的频率大于或等于模拟数据的频带带宽（最高变化频率）的两倍时， 所得的离散信号可以无失真地代表被采样的模拟数据
                   +   即采样频率$\geqslant2$信号最高频率。
          2.   量化：把抽样取得的电平幅值按照一定的分级标度转换位对应的数字值并取整，于是连续的电平幅值就变为离散的数字量。
          3.   编码：把量化结果转换为与之对应的二进制编码。

          音频信号模拟数据通过脉冲编码调制$PCM$编码器转换为数字信号。

          采样和量化的实质就是分割和转换

     3.   数字数据==调制==为模拟信号：数字数据通过调制器转换为模拟信号。

          1.   幅移键控，调幅$ASK$：通过改变载波信号的**振幅$Amplitude$**来表示数字信号$1$和$0$，而载波的频率和相位都不改变。比较容易实现，但抗干扰能力差。

          2. 频移键控，调频$FSK$：通过改变载波信号的**频率$Frequency$**来表示数字信号$1$和$0$，而载波的振幅和相位都不改变。容易实现，抗干扰能力强，目前应用较为广泛。

          3. 相移键控，调相$PSK$：通过改变载波信号的**相位$Phase$**来表示数字信号$1$和$0$，而载波的振幅和频率都不改变。又分为绝对调相和相对调相。

          4. 正交振幅调制$QAM$：在频率相同的前提下，将$ASK$与$PSK$结合起来，形成叠加信号

              +   设波特率为$B$，采用$m$个相位，每个相位有$n$种振幅，码元类型=相位数×振幅数。则该$QAM$技术的数据传输速率$R$为
                  $$
                  R=B\log_2(nm)
                  $$

     4.   模拟数据到模拟信号：模拟数据通过放大调制器转换为模拟信号，将低频信号调制为高频信号。

          +   为了实现传输的有效性，可能需要较高的频率
              +   这种调制方式还可以使用频分复用$FDM$技术，充分利用带宽资源
              +   电话机和本地局交换机采用模拟信号传输模拟数据的编码方式，模拟的声音数据是加载到模拟的载波信号中传输的

5.   电路交换、报文交换与分组交换

     1.   电路交换：链路支持多路复用。在数据传输的过程中，用户始终占用==端到端==的固定传输带宽。 没有存储转发，即==不会存在存储转发所耗费的时间==
          1.   优点：通信时延小速度快。有序传输。无冲突争用。适用范围广。实时性强。控制简单

               +   传输数据的时延非常小，特别是当传输的数据量较大时，这一优点非常明显。不存在失序问题。不同的通信双方拥有不同的信道，不会出现争用物理信道的问题。既适用于传输模拟信号，又适用于传输数字信号。通信双方之间的物理通路一旦建立，双方就可以随时通信。
          2.   缺点：建立连接时间长。线路独占使用效率低。灵活性较差。难以规格化。不能流量控制。无差错控制能力。
               +   只要在通信双方建立的通路中的任何一点出了故障，就必须重新拨号建立新的连接。电路交换时，数据直达，不同类型规格速率的终端很难相互进行通信
     2.   报文交换：采用的是==存储转发==的传输方式。交换机收到报文之后，先进行存储，等待链路空闲之后进行转发。转发的路径不固定的，是比较随机的。报文交换不能应用于实时通讯，如电话，视频。主要使用在早期的电报通信网中，现在较少使用，通常被较先进的分组交换方式所取代
          1.   优点：无需建立连接。存储转发，动态分配线路。线路可靠性高。线路利用率较高。多目标服务。

               +   不需要为通信双方预先建立一条专用的通信线路，不存在建立连接时延，用户可以随时发送报文。如果某条传输路径发生故障，那么可重新选择另一条路径传输数据， 因此提高了传输的可靠性。通信双方不是固定占有一条通信线路，而是在不同的时间一段一段地部分占有这条物理通道，因而大大提高了通信线路的利用率。一个报文可以同时发送给多个目的地址，这在电路交换中是很难实现的。
          2.   缺点：有存储转发时延。报文大小不定，需要网络结点有较大的缓存空间。
     3.   分组交换：现在的主流网络基本上都可视为分组交换网络（==包括以太网==）。将大的数据块分割为小的数据块。分组交换和报文交换基本相同，就是将报文切割之后再进行发送。分组交换总的发送时延为$T=t_1+(n-1)t$
          1.   优点：无需建立连接。存储转发，动态分配线路。线路可靠性高。线路利用率较高。相较于报文交换，简化了存储管理：分组大小一定，存储管理更容易。分组更小，所以传输时延比报文交换的更小。减少了出错概率和重发数据量。

               +   不需要为通信双方预先建立一条专用的通信线路，不存在建立连接时延，用户可以随时发送报文。当发送方把报文交给交换设备时，交换设备先存储整个报文，然后选择一条合适的空闲线路，将报文发送出去。因为分组的长度固定，相应的缓冲区的大小也固定， 在交换结点中存储器的管理通常被简化为对缓冲区的管理，相对比较容易。分组是逐个传输的，可以使后一个分组的存储操作与前一个分组的转发操作并行，这种流水线方式减少了报文的传输时间；此外，传输一个分组所需的缓冲区比传输一次报文所需的缓冲区小得多，这样因缓冲区不足而等待发送的概率及时间也必然少得多。因为分组较短，其出错概率必然减小，所以每次重发的数据量也就大大减少，这样不仅提高了可靠性，也减少了传输时延
          2.   缺点：有存储转发时延。需要传输额外的信息量（编号、目的地址等）。乱序到达目的主机时，需要对分组进行排序。
               +   尽管分组交换比报文交换的传输时延少，但相对于电路交换仍存在存储转发时延，而且其结点交换机必须具有更强的处理能力。一定程度上降低了通信效率， 增加了处理的时间，使控制复杂，时延增加。若采用虚电路服务，虽无失序问题，但有呼叫建立、数据传输和虚电路释放三个过程
     4.   三种交换方式小结
          1.   报文交换和分组交换都采用存储转发。
          2.   传输数据量大且传输时间远大于呼叫时间，就选择电路交换，其传输时延最小。
          3.   报文交换分组交换在信道利用率上优于电路交换。

6.   分组交换的两种方式：数据报方式和虚电路方式

     1.  数据报方式：提供无连接服务，可随时发送和接受。尽最大可能交付，所以不保证可靠性。每个分组携带源和目的地址，以便可以独立传输。分组在交换结点存储转发时需要排队等待，这会带来一定的时延。可及时更新转发表，适应性强。存储转发的延时一般较小，提高了网络的吞吐量。收发双方不单独占用信道，资源利用率高。传输过程如下：
         1.  主机$A$先将分组逐个发往与它直接相连的交换结点$A$，交换结点$A$缓存收到的分组。
         2.  然后查找自己的转发表。由于不同时刻的网络状态不同，因此转发表的内容可能不完全相同，所以有的分组转发给交换结点$C$，有的分组转发给交换结点$D$。
             +   路由器根据分组的目的地址转发组
         3.  网络中的其他结点收到分组后，类似地转发分组，直到分组最终到达主机$B$。 
     2.  虚电路方式：虚电路是一条源主机到目的主机类似电路的逻辑连接，路径上所有结点都要维持该虚电路的建立，都维持一张虚电路表，每一项都记录一个打开的虚电路的信息。虚电路方式提供连接服务，首先为分组的传输确定传输路径，然后沿该路径/连接传输系列分组，分组的传输路径相同，结束后拆除连接。一条物理链路可能有多个逻辑电路。
         1.   虚拟电路包含临时和永久两种：
              1.   永久性虚电路$PVC$：是一种提前定义好的、基本上不需要任何建立时间的端点之间的连接。
              2.   交换型虚电路$SVC$：是端点之间的一种临时性连接，这些连接只持续所需的时间，并且在会话结束时就取消这种连接。
         2.   传输过程：
              1.   建立虚电路连接：
                   +   主机$A$与主机$B$之间先建立一条逻辑通路，主机$A$发出一个特殊的“呼叫请求”分组，该分组通过中间结点送往主机$B$，若主机$B$同意连接，则发送“呼叫应答”分组予以确认
                   +   每个分组携带**虚电路标识**$VCID$，而非目的地址，源主机发送呼叫请求分组并收到呼叫应答分组后才算建立连接。
              2.   数据传输过程中为**全双工通信**。
              3.   释放虚电路连接：传送结束后主机$A$通过发送“释放请求”分组来拆除虚电路，逐段断开整个连接

7.   传输介质：传输介质也称传输媒体，是数据传输系统种在发射设备与接受设备之间的物理通路（信道是逻辑通路）。传输媒体并不是物理层

     1.   导向型传输介质：电磁波沿着固体媒介（铜线或光纤）被导向传播。如铜线或光纤。
          1.   双绞线：两根采用规则并排校合并绝缘的铜导线组成，绞合是减少电磁干扰。根据有无屏蔽层分为屏蔽双绞线$STP$和无屏蔽双绞线$UTP$，$UTP$外加上金属网就是$STP$​。通信距离为几到数十公里。距离太远需要使用放大器放大模拟信号，中继器整形数字信号。双绞线的价格便宜，是最常用的传输介质之一，在==局域网和传统电话网==中普遍使用。双绞线的带宽取决于铜线的粗细和传输的距离。模拟传输和数字传输都可使用双绞线，其通信距离一般为几千米到数十千米。距离太远时：对于模拟传输，要用**放大器**放大衰减的信号；对于数字传输，要用**中继器**将失真的信号整形。
          2.   同轴电缆：由内导体、绝缘层、网状编织屏蔽层和塑料外层构成。由于外导体屏蔽层的作用，同轴电缆较双绞线具有良好的抗干扰特性，被广泛用于传输较高速率的数据，其传输距离更远，但价格较双绞线贵。两种规格：$50\Omega$基带同轴电缆缆，主要用于传送基带数字信号，用于局域网；$75\Omega$宽带同轴电缆，主要用于传送宽带信号；用于有线电视系统。
          3.   光纤：传递光脉冲，带宽大于其他传输媒体。由实心纤芯与包层构成。分为多模光纤与单模光纤：多模光纤的光源为发光二极管，光脉冲在多模光纤中传输时会多次反射，造成失真，因此多模光纤只适合于近距离传输；单模光纤直径只有一个光的波长，可使光线一直向前传播，光源为定向性很好的半导体激光器，单模光纤的衰减较小，可传输数公里甚至数十千米而不必采用中继器，适合远距离传输。制造成本较高。
     2.   非导向性传输介质：电磁波沿着自由空间传播，如空气，水等等。
          1.   无线电波：全方向传播；穿透率较强；可远距离通信，主要用于电话通信。被广泛应用于通信领域，如无线手机通信、计算机网络中的无线局域网$WLAN$等
          2.   微波：固定方向传播；频率高、频段广、数据率高；微波通信的信号是沿直线传播的分为地面微波接力通信与卫星通信：
               + 卫星通信的优点：通信容量大、距离远、覆盖光、广播通信与多址通信
               + 卫星通信的缺点：传播时延长、受天气干扰大、误码率高、成本高。
          3.   红外线与激光：固定方向传播；需要转换为各自的信号格式再在自由空间中传播。

8.   物理层接口特性和协议

     1.   物理层接口标准：$EIARS.232.C、ADSL$和$SONET/SDH$等

     2.   物理层的接口特性

          1.   **机械特性：** 指明接口所用接线器的规格、形状和尺寸、引脚数目和排列、固定和锁定装置等。

          2.   **电气特性：** 指明在接口电缆的各条线上出现的电压范围、阻抗匹配、传输速率、距离限制。

          3.   **功能特性：** 指明某条线上出现某一电平的电平意义、接口部件的用途。

          4.   **规程特性/过程特性：** 指明对于不同功能的各种可能事件的出现顺序，即工作规程和时序的关系。

9.   物理层设备：均无法分割广播域和冲突域；物理层设备均不能连接两个具有不同速率的局域网。

     1.   中继器$RP\&repeater$：也称为转发器，主要功能是将信号整形并放大再转发出去，以消除信号经过一长段电缆后而产生的失真和衰减，使信号的波形和强度达到所需要的要求，进而扩大网络传输的距离。原理是信号再生，而非简单地将衰减的信号放大
          1.   中继器若出现故障，对相邻两个网段的工作都将产生影响
          2.   由于中继器工作在物理层，因此它==不能连接两个具有不同速率的局域网==。
               +   当且仅当网络设备具有存储转发的功能，才可以认为它能连接两个不同的协议。而中继器没有存储转发功能，因此它不能连接两个速率不同的网段，中继器两端的网段一定要使用同一个协议。
          3.   中继器的两端：网段而非子网，使用中继器连接的几个网段仍然是一个局域网。类型相同，网络速度相同。只负责发送而不关心是否有问题。不会存储转发所以一定要协议相同。可以连不同媒体也可以连相同媒体。

               + 采用粗同轴电缆的$10BASE5$以太网规范中存在$5-4-3$规则：
                   + $5$是指==不能超过五个**网段**==
                   + $4$是指在这些网段中的==物理层网络设备（中继器，集线器）最多不超过四个==
                   + $3$是指这些网段中==最多只有三个网段挂有计算机==。
     2.   集线器$Hub$：实质上是一个多端口的中继器$RP$，功能类似。当Hub工作时，一个端口接收到数据信号后，由于信号在从端口到$Hub$的传输过程中已有衰减，所以$Hub$便将该信号进行信号再生，使之再生到发送时的状态，紧接着转发到其他除输入端口外所的有处于工作状态的端口。如果同时有两个或多个端口输入，那么输出时会发生冲突，致使这些数据都无效（无法分割冲突域）。
          1.   只能在半双工状态下工作。
          2.   集线器连接的网络拓扑结构上属于星型。
          3.   ==以太网上的集线器默认是$100Base-T$==，即传输速率为$100Mb/s$。

## 第三章 数据链路层

### 【考纲内容】

1.   数据链路层的功能

2.   组帧

3.   差错控制：检错编码，纠错编码

4.   流量控制与可靠传输机制

     +   流量控制、可靠传输与滑动窗口机制
     +   停止-等待协议
     +   后退$N$帧协议$GBN$
     +   选择重传协议$SR$

5.   介质访问控制

     1.   信道划分：频分多路复用、时分多路复用、波分多路复用、码分多路复用的概念和基本原理

     2.   随机访问
          1.   $ALOHA$协议

          2.   $CSMA$协议
          3.   $CSMA/CD$协议
          4.   $CSMA/CA$协议

     3.   令牌传递协议

6.   局域网
     +   局域网的基本概念与体系结构
     +   以太网与$IEEE 802.3$
     +   $IEEE 802.11$无线局域网
     +   $VLAN$基本概念与基本原理

7.   广域网
     +   广域网的基本概念
     +   $PPP$协议

8.   数据链路层设备
     +   局域网交换机及其工作原理

### 【复习提示】

+   本章是历年考试中考查的重点
+   要求在了解数据链路层基本概念和功能的基础上，==重点掌握滑动窗口机制、三种可靠传输协议、各种$MAC$协议、$HDLC$协议和$PPP$协议，特别是$CSMA/CD $协议和以太网帧格式，以及局域网的争用期和最小帧长的概念、二进制指数退避算法==
+   此外，中继器、网卡、集线器、网桥和局域网交换机的原理及区别也要重点掌握。

### 选择题考点总结

1.    数据链路层功能：主要作用是==加强物理层传输原始比特流的功能==，==将物理层提供的可能出错的物理连接改造为逻辑上无差错的数据链路，使之对网络层表现为一条无差错的链路==。

      1.   为网络层提供服务：对网络层而言，数据链路层的基本任务是将源机器中来自网络层的数据传输到目标机器的网络层。数据链路层通常可为网络层提供如下服务：

           1. 无确认无连接服务：源机器发送数据帧时不需先建立链路连接，目的机器收到数据帧时不需发回确认。==对丢失的帧，数据链路层不负责重发而交给上层处理==。适用于实时通信或误码率较低的通信信道，==如以太网==。
           2. 有确认无连接服：源机器发送数据帧时不需先建立链路连接，但目的机器收到数据帧时必须发回确认。源机器在所规定的时间内未收到确定信号时，就==重传丢失的帧==以提高传输的可靠性。适用于误码率较高的通信信道，如==无线通信==。
           3. 有确认面向连接服务目的机器对收到的每一帧都要给出确认，源机器收到确认后才能发送下一帧，因而==该服务的可靠性最高==。适用于通信要求（可靠性、实时性）较高的场合。帧传输过程分为三个阶段：建立数据链路；传输帧；释放数据链路
           4. 有连接就一定有确认，即不存在无确认的面向连接的服务

      2.   链路管理：数据链路层连接的建立、维持和释放过程称为链路管理，==主要用于面向连接的服务==，控制对物理传输介质访问。

           +   链路两端的结点要进行通信，必须首先确认对方己处于就绪状态，并交换一些必要的信息以对帧序号初始化，然后才能建立连接，在传输过程中则要能维持连接，而在传输完毕后要释放该连接
           +   在多个站点共享同一物理信道的情况下（如在局域网中）如何在要求通信的站点间分配和管理信道也属于数据链路层管理的范畴
      3.   组帧（定义数据格式）：帧定界、帧同步、透明传输，规定帧的数据部分的长度上限即最大传送单元$MTU$。

           +   两台主机之间传输信息时，必须将网络层的分组==**封装成帧**==，以帧的格式进行传送
           +   将一段数据的前后分别添加首部和尾部，就构成了帧，帧长等于数据部分的长度加上首部和尾部的长度，首部和尾部中含有很多控制信息，它们的一个重要作用是确定帧的界限，即==**帧定界**==
           +   而==**帧同步**==指的是接收方应能从接收到的二进制比特流中区分出帧的起始与终止。
           +   如果在数据中恰好出现与帧定界符相同的比特组合（会误认为“传输结束”而丢弃后面的数据），那么就要采取有效的措施解决这个问题，即==**透明传输**==
               +   透明传输是指不管所传数据是什么样的比特组合，都应当能够在链路上传送。因此，链路层就“看不见”有什么妨碍数据传输的东西。
      4.   流量控制：限制**发送方**的流量，使其发送速率不超过接收方的接收能力。

           +   流量控制并不是数据链路层特有的功能，许多高层协议中也提供此功能，只不过控制的对象不同而已
      5.   差错控制：使发送方确定接收方是否正确收到由其发送的数据的方法称为==差错控制==。

2. 组帧（定义数据格式）：帧定界、帧同步、透明传输，规定帧的数据部分的长度上限即**最大传送单元**$MTU$。由于字节计数法的脆弱性与字符填充实现的复杂性与不兼容性，所以基本上使用零比特填充与违规编码法。

    1.   字符计数法：帧首部使用一个计数字段（第一个字节，`8bit`）表明帧内字符数，题目计算时这个计数字段也要算成一个字符。
         +   缺点：如果在某一个帧内，标记位后面的某个字节的数据丢失，那么会影响后面所有的帧，收发双方扇失去同步，从而造成灾难性后果。比如`3 1 1`和`4 2 2 2`，如果前面的帧丢失变成$3\;1$，那么后面的$4$就会被补到前面变成$3\;1\;4$导致错误。
    2.   字符填充的首尾定界符法：帧就是加头加尾分别标记开始结束，而为了使信息位中出现的特殊字符不被误判为帧的首尾定界符，可在特殊字符前面填充一个转义字符$ESC$，其后面紧跟的是**数据信息**，而不是控制信息。
         +   如果转义字符$ESC$也出现在数据中，那么解决方法仍是在转义字符前插入一个转义字符
         +   控制字符$SOH$表示帧开始，控制字符$EOT$表示帧结束。
    3.   零比特填充法：零比特填充法使用一个特定的比特模式，即`0111 1110`来标志一帧的开始和结束。在发送端扫描整个信息字段（不包括首尾定界符），只要有==连续的五个$1$，就立即在第五个$1$后加上一个$0$==，无论后面是$1$还是$0$；在接收端收到一个帧时，先找到标志字段确定边界，再用硬件对比特流进行扫描，==发现连续五个$1$时就把后面的$0$删除==。
         +   比特填充法允许数据帧包含任意个数的比特，也允许每个字符的编码包含任意个数的比特。
         +   ==零比特填充法很容易由硬件来实现，性能优于字符填充法。==

    4.   违规编码法：使用帧中不会用到的编码来定帧的起始和终止。违规编码法不需要采用任何填充技术，便能实现数据传输的透明性，但它==只适用于采用冗余编码的特殊编码环境==。
         +   在物理层进行比特编码时，通常采用违规编码法
         +   局域网$IEEE 802$标准就采用了这种方法

3.   差错控制：使发送方确定接收方是否正确收到由其发送的数据的方法称为==差错控制==。

     1.  通常，这些错误可分为**位错**和**帧错**

         1.   位错指帧中某些位出现了差错，比特位出错/反转，$1$变为$0$，$0$变为$1$。也称为比特差错。通常采用==循环冗余校验$CRC$方式==发现==位错==
              +   通过==自动重传请求$ARQ$方式==来重传出错的帧，$ARQ$是位错的处理方式，是发现位错后要求重传的方法，与帧错无关
         2.   帧错指帧的丢失、重复或失序等错误。数据链路层引入**定时器**和**编号机制**，能保证每一帧最终都能有且仅有一次正确地交付给目的结点

     2.  通常利用编码技术进行差错控制，主要有两类

         1.   自动重传请求$ARQ$：接收端检测到差错时，就设法通知发送端重发，直到接收到正确的码字为止
         2.   前向纠错$FEC$：接收端不但能发现差错，而且能确定比特串的错误位置，从而加以纠正

     3.  噪声来源：

         + 全局噪声（热噪声，随机噪声）：产生随机差错。线路本身电气特征所产生的固有；可以通过改善传感器调高信噪比来减少。
         + 局部噪声（冲击噪声）：产生突发差错。外界特定短暂的原因所产生，是产生差错的主要原因；可以通过编码计数来解决。

     4.  检错编码：奇偶校验法和循环冗余码$CRC$。

         1.  奇偶校验码：奇校验要选校验码$1$或$0$使得$n$位的总数据里的$1$为奇数，而偶校验要选校验码$1$或$0$使得$n$位的总数据里的$1$为偶数。对于出错的数据仍有对应的奇偶个$1$则无法检验出是否出错。即==只能检查出来奇数位出错的情况==，偶数个位数不能检查出来，所以其检错能力为$50\%$。

         2.  循环冗余码$CRC$：分为三个部分：传输数据、生成多项式、$FCS$帧检验序列/冗余码。正式的计算方法如下，并给出例题：发送数据为`1101 0110 11`，采用$CRC$校验，生成多项式为`10011`，求最终发送数据。

             1.   原数据加$0$：假设生成多项式$G(x)$的阶为$r$，则需要在原数据后面加$r$个$0$（多项式有$N$位，那么阶就是$N-1$位）。

                  +   如题目中生成多项式`10011`阶为$4$，表示为多项式是$x^4+x^1+x^0$，最后数据就是`1101 0110 1100 00`。

             2.   模二除法：在数据加$0$后使用模二除法除以多项式，余数就是冗余码$CRC$校验码的比特序列。

                  +   模二除法得到了帧检验序列$FCS$为`1110`，所以要发送的数据就是要发送的数据加上帧检验序列：`1101 0110 1111 10`。

             3.   检错过程：接收端

             4.   把接收到的每一个帧都除以相同的生成多项式，然后检查得到余数$R$，如果$R=0$则接受，否则丢弃。

                  +    $FCS$的生成与接收端$CRC$检验都是由硬件完成，所以处理很快，因此不会延误数据的传输。

                       $CRC$具有纠错能力，但是数据链路层只使用了其检错能力，错误就直接丢弃。

             5.   纠错编码：海明码，能发现双比特错，但是只能纠正单比特错，正式的计算方法如下，并给出例题：传输的数据`D=1011 01`，求最终发送数据。

                  1. 海明不等式确定校验码位数r：
                      $$
                      2^r\geqslant k+r+1
                      $$
                      其中$r$为冗余信息位，$k$为待校验信息位，若要检测两位错，则需再增加$1$位校验位，即$k+1$位

                      +   $D=1011 01$为$6$位，即信息位$k$为$6$，就可以代入得到最小的$r$为$4$，传输数据为$6+4=10$位。

                  2. 确定校验码和数据的位置：假设$r$位校验码分别为$P_1$、$P_2$、$P_3$、$\cdots$$、$$P_r$，验码$P_n$需要插入到原数据之中作为传输数据，且只能插入到$2^n$的位置，即$1，2，4\cdots$，然后在其他位置按需填入$D_n$

                  3. 求出校验码的值：根据二进制中校验码$P_n$位置的$1$来判断其可以校验哪些位，因为第一步校验位的插入规定，$P_n$的位置使用二进制表示一定只有一个$1$，那么就要根据这个$1$所在的位置找到所有同样这个位置是$1$的位置所在的数据位，就是可以被校验码校验的原数据位。同一位可以被不同的校验码同时校验。

                      1. $P_1$是第一位，即$0001$位，所以$1$在二进制位置的第四个地方，找到$10$个位置中所有二进制位置的第四个位为$1$的数据位，即$0011$（$3$）：$D_1$；$0101$（$5$）：$D_2$；$0111$（$7$）：$D_4$；$1001$（$9$）：$D_5$。所以$P_1$可以校验这$4$个数据。

                          要使其能校验，就要令所有要校验的位异或等于$0$，或直接等于所有校验数据位异或值。

                          即令$P_1\oplus D_1\oplus D_2\oplus D_4\oplus D_5=0$。

                      2.   同理$P_2\oplus D_1\oplus D_3\oplus D_4\oplus D_6=0,P_3\oplus D_2\oplus D_3\oplus D_4=0,P_4\oplus D_5\oplus D_6=0$

                      3.   从而最后海明码就是`0010 0111 01`。

                      4.   如果海明码需要一个最高的全校验位，则需要将其对全部数据位和其他全部校验位进行异或为$0$得到。

                  4.   检错并纠错：==海明码“纠错”$d$位，需要码距为$2d+1$的编码方案；海明码“检错”$d$位，则只需码距为$d+1$==。

                       1.   已知海明码就是`0010 0111 01`。假如第五位出错，即变为`0010 1111 01`。

                       2.   构成$r$个校验方程，令所有要校验的位进行异或运算：

                            $P_1\oplus D_1\oplus D_2\oplus D_4\oplus D_5=0\oplus1\oplus1\oplus1\oplus0=1$。

                            $P_2\oplus D_1\oplus D_3\oplus D_4\oplus D_6=0\oplus1\oplus1\oplus1\oplus1=0$。

                            $P_3\oplus D_2\oplus D_3\oplus D_4=0\oplus1\oplus1\oplus1=1$。

                            $P_4\oplus D_5\oplus D_6=1\oplus0\oplus1=0$。

                            从$P_1$进行的运算结果开始，将所有计算结果组成为$1010$，这个数字即表示出错的位置，即第五位出错。

                            若校验方程的结果全为$0$，说明无错，可以接收

4.   流量控制：限制**发送方**的流量，使其发送速率不超过接收方的接收能力。以防较高的发送速度和较低的接受能力不匹配时丢包

     1.   数据链路层流量控制与传输层的流量控制的区别：

          1.   数据链路层流量控制是点到点的，而传输层的流量控制是端到端的。
          2.   数据链路层流量控制是相邻两个结点的，而传输层的流量控制是两个主机的。
          3.   数据链路层流量控制是收不下就不回复确认（确认控制帧），而传输层的流量控制是接收端发送给发送端一个窗口公告。

     2.   数据链路层的流量控制由自动重传请求$ARQ$来实现。

          +   $ARQ$流量控制协议分为停止等待协议与滑动窗口协议，滑动窗口协议又分为两种后退$N$帧协议与选择重传协议。其实停止等待协议也是一种特殊的滑动窗口协议。
          +   后两种协议是滑动窗口技术和请求重复技术的结合，所以称为连续$ARQ$协议。
          +   ==滑动窗口可以解决流量控制和可靠传输两个部分的功能。==
              +   可靠传输：发送端发啥，接收端收啥。
              +   流量控制：控制发送速率，使接收方有足够的缓冲空间来接收每一个帧。
          +   数据链路层协议的滑动窗口在同一次发送与接受中都是固定的
          +   现有的实际有线网络的数据链路层很少采用可靠传输

     3.   停止等待协议$SW$：停止-等待协议相当于发送窗口和接收窗口大小均为`1`的滑动窗口协议。每发送完一个帧就停止发送并等待对方确认，如果收到确认就再发送下一个帧。因为是停止等待，所以只用一位以$1$、$0$​为值来对帧编号就可以了，相应的确认帧分别用`ACK0`和`ACK1`来表示。虽然同样标号的帧，却是不同的帧。特点：简单，信道利用率低。

          1.   发送帧出错丢失：帧出错时接收站利用前面讨论的差错检测技术检出后，简单地将该帧丢弃，两种情况都不会发送确认帧。若连续出现相同发送序号的数据帧，表明发送端进行了超时重传

          2.   确认帧出错丢失：此时接收方已收到正确的数据帧，但发送方收不到确认帧，因此发送方会重传已被接收的数据帧，接收方收到同样的数据帧时会丢弃该帧,并重传一个该帧对应的确认帧。连续出现相同序号的确认帧时，表明接收端收到了重复帧。 

          3.   超时重传机制

               1.   发送方和接收方都须设置一个帧缓冲区，发送完一个帧后，必须保存其副本以便重传，确认才能丢失该副本。
               2.   数据帧与确认帧必须编号。
               3.   超时计时器：每次发送一个帧就启动一个计时器。
               4.   超时计时器设置的重传事件应该比帧传输的平均$RTT$更长。
                    +   $RTT$包括了数据在传输路径中的传播时延和处理时延，以及数据帧在传输过程中可能发生的排队时延等。当数据帧从发送方发送出去后，它需要经过一定的时间才能到达接收方。然后，接收方接收到数据帧后，会立即发送确认帧$ACK$回到发送方，表示数据帧已经成功接收。
                    +   $RTT$对于网络性能非常重要，它影响着数据传输的速度和可靠性。较小的RTT意味着数据的往返时间短，数据传输的速度较快，而较大的$RTT$可能导致数据传输的延迟较高。
                    +   $RTT$不仅受到网络传输的物理因素影响，还受到网络拓扑、网络拥塞情况以及传输协议的影响。网络中的链路质量、传输距离和传输速率等都会对$RTT$产生影响。

          4.   信道利用率$U$：发送方在一个发送周期内，有效地发送数据所需要的时间占整个发送周期的比率。

               1.   计算公式为
                    $$
                    U=\dfrac{T_D}{T_D+RTT+T_A}
                    $$
                    其中，$T_D$表示发送周期中有效地发送数据所占时间，$RTT$表示往返时延，$T_A$表示确认帧传输时间

               2.   当忽略确认帧传输时间$T_A$时，计算公式为
                    $$
                    U=\dfrac{L/C}{T}\\
                    T=L/C+RTT
                    $$
                    其中，$L$表示发送周期中发送$L$比特的数据即==帧长==，$C$表示发送方数据传输率，$T$表示发送周期（发送时延加往返往返时间，其中发送时延可以使用$L/C$计算），$RTT$表示往返时延

               3. 要使信道利用率达到最高，应该先算出发送一帧到收到确认为止的总时间$T_D+RTT+T_A$，然后算出这些时间总共可以继续发送多少帧，然后取以二为底的对数即可

                   + 数据帧长度是不确定的情况应以最短的帧长计算

               4. 信道吞吐率

                   + 信道吞吐率 = 信道利用率 * 发送方的发送速率

     4.   后退$N$帧协议$GBN$：$GBN$会一次性将在发送窗口内的$n$个帧一个个全部发送完，然后再移动受确认的帧的个数个窗口，如果一直收不到确认信息则一直不移动发送窗口并不断依次重传。

          1.   使用**累计确认模式**，如果接发送方收到当前$n$号帧的确认消息，则前面的所有帧都已经确认接收到。

          2.   $GBN$发送方：

               1.   响应上层调用：上层发送数据，发送方必须检查发送窗口是否已满，未满则产生帧并发送，若已满则先缓存数据，等窗口不满时再发送。
               2.   收到一个$ACK$：对$n$号帧采取**累积确认**，偶尔捎带确认的方式，即==标明接收方已经收到$n$号帧和其之前的全部帧。==
                    +   在计算机通信中，当一个数据帧到达的时候，接收方并不是立即发送一个单独的控制帧，而是抑制一下自己并且开始等待，直到网络层传递给它下一个分组，确认信息被附在往外发送的数据帧上即帧头中的$ACK$域
                    +   实际上，相当于确认报文搭了下一个外发数据帧的便车，这种“将确认暂时延迟以便可以钩到下一个外发数据帧”的技术称为捎带确认
               3.   超时重传：如果出现超时，则发送方重传==所有已发送但是未被确认==的帧，即超时以及**后面**的帧
                    +   接收方、发送方只按**顺序**接受帧，对于其非期待的（**乱序的**）确认帧则丢弃，只接受在接收窗口（大小为1）里面的帧，除此以外的帧会被丢弃

          3.   $GBN$接收方：

               1.   如果正确收到$n$号帧且顺序一致，则接收方为$n$帧发送一个$ACK$帧，并将该帧中的数据部分上交上层。
                    +   成功接收到接收窗口中期待的$n$号帧后将接收窗口后移一位，开始期待接收$n+1$号帧
               2.   其余情况都丢弃帧，并为最近按序接收的帧重新发送$ACK$，向发送方要重传帧
                    +   接收方无需缓存任何失序帧，只用维护下一个按序接收的帧序号。
                    +   即成功接收$1 \;2 $号帧后又接收到$4\;5$号帧时会直接丢弃，并会向发送端重新发送$2$号帧的$ACK$

          4.   $GBN$窗口长度：若帧编号采用$n$个比特位，则$GBN$发送窗口的尺寸$W_T$应满足
               $$
               1\leqslant W_T\leqslant 2^n-1
               $$

               +   一句话总结，无论是$GBN$设置为 $2^n-1$ ，还是$SR$设置为 $2^{n-1}$ 均是为了==超时重传接受方能够区分到底是新数据还是老数据。==
               +   所以发送窗口和接收窗口总和不能超过$2^n$，而$GBN$接收窗口长度始终为`1`，故$GBN$发送窗口不超过$2^n-1$。

          5.   $GBN$协议特点

               1.   连续发送数据帧，信道利用率较高。==但当信道的传输质量很差导致误码率较大时， 后退$N$帧协议不一定优于停止-等待协议==
               2.   在重传时必须把原来已经正确传送的数据帧重传，从而令传送速率降低。

     5.   选择重传协议$SR$：累计确认会导致批量重传问题，所以$SR$为了实现只重传出错的帧，解决的办法就是设置单个确认而非累计确认，同时加大接收窗口，缓存乱序到达的帧。

          1.   发送窗口和接收窗口大小均不超过$2^{n-1}$

               1.   发送窗口中分为已经发送被确认的帧、已经发送但等待确认的帧、还能发送的帧三种，其中这三种帧不一定是连续的，而只有发送窗口的第一个帧是已经发送被确认的帧发送窗口才能移动一格或多格。
               2.   接收窗口分为希望收到但是没有收到的帧、希望收到且已收到的帧、等待接收的帧三种，其中这三种帧不一定是连续的，接收窗口中收到且确认的帧位于缓存之中，而只有接收窗口的第一个帧是希望收到且已收到的帧接收窗口才能移动一格或多格。

          2.   $SR$发送方：

               1.   响应上层调用：上层发送数据，发送方必须检查发送窗口是否已满，未满则产生帧并发送，若已满则先缓存数据，等窗口不满时再发送。
               2.   收到一个$ACK$：
                    1.   如果收到$ACK$对应的帧序号在窗口内，则$SR$发送方将那个被确认的帧标记为已接收
                    2.   如果该帧序号是窗口的下界（最左边），在窗口向前移动到具有最小序号的未确认帧处
                    3.   如果窗口移动且有序号在窗口内未发送的帧，则发送这些帧。
               3.   超时重传：每一个帧都具有自己的计时器，一个超时事件发生后只重传一个帧。

          3.   $SR$接收方：

               1.   ==确认一个正确接收的帧而不管是否按序==
                    +   失序的帧将被缓存，并返回发送方一个该帧的确认帧，==直到所有比其序号更小的帧都被接收为止==，这时才能移动接收窗口并将这一批帧交付上层。
               2.   如果收到了接收窗口前的一个接收窗口长度以内的帧，就返回一个$ACK$表明发送方超时重传的帧已经得到了确认。
               3.   如果是其他情况就忽略该帧。

          4.   $SR$窗口长度：采用$n$个比特对帧编号，则发送/接收窗口的尺寸$W_T/W_R$应满足$W_R=W_T=2^{n-1}$​。（即编号数量的一半）
               $$
               W_R+W_T\le2^{n}
               $$

          5.   $SR$协议特点

               1.   对数据帧逐一确认，收到一个确认一个。
               2.   只会重传出错帧。
               3.   接收方有缓存，其他两个没有。
               4.   发送窗口与接收窗口相等。
               5.   全部收到后再一起上传。

5.   介质访问控制：采取措施使得两对结点之间的通信不会互相干扰。分为静态划分信道和动态划分信道

