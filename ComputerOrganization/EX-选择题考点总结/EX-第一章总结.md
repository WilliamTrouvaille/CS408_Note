# EX-第一章总结

## 【导语】

### 【考纲内容】

1. **计箅机系统层次结构**

    - 计算机系统的基本组成
    - 计算机硬件的基本组成
    - 计算机软件和硬件的关系
    - 计算机系统的工作原理：**存储程序**方式、高级语言程序与机器语言程序的转换程序和指令的执行过程
    
2. **计算机性能指标**

    - 吞吐量、响应时间、$CPU$时钟周期、主频、$CPI$、$CPU$执行时间、$MIPS$

    + $FLOPS$：$MFLOPS$、$GFLOPS$、$TFLOPS$、$PFLOPS$、$EFLOPS$、$ZFLOPS$

### 【复习提示】

本章是组成原理的概述，考查时易针对有关**概念**或性**能指标**出选择题，也可能综合后续章节的内容出有关性能分析的综合题。

学习本章时，请读者思考以下问题：

1) 计算机由哪几部分组成? 以哪部分为中心? .

2) 主频高的 $CPU $一定比主频低的$CPU $快吗? 为什么?

3) 翻译程序、汇编程序、编译程序、解释程序有什么差别? 各自的特性是什么?

4) 不同级别的语言编写的程序有什么区别? 哪种语言编写的程序能被硬件直接执行?

## 选择题总结

### 计算机系统层次结构

1.   计算机系统的组成：**计算机系统性能的好坏，很大程度上是由软件的效率和作用来表征的**，而软件性能的发挥又离不开硬件的支持。
     1.   计算机系统 = 硬件系统 + 软件系统
     2.   计算机软件=应用软件+系统软件
2.   冯诺依曼结构：“存储程序”的思想奠定了现代计算机的基本结构，以此概念为基础的各类计算机通称为冯-诺依曼机
     1.   存储程序：指将指令以二进制代码的形式事先输入计算机的主存储器，然后按其在存储器中的首地址执行程序的第一条指令，以后就按该程序的规定顺序执行其他指令，直至程序执行结束。即**按地址访问并顺序执行指令**
     2.   指令和数据用二进制表示，指令和数据以同等地位存于存储器，可**按地址**寻访。
          +   区分指令和数据用的方法为：机器周期（**指令周期的不同阶段**，主要区分方法）和来源。
          +   **取指周期**取出的是指令；**分析、取数或执行周期**取出的是数据。
          +   指令地址来源于**程序计数器**；数据地址来源于**地址形成部件**。
     3.   指令由操作码（指令序列号，用来表示处理的指令）和地址码（操作数据存储的地址）组成。
     4.   .早期冯诺依曼机**以运算器为中心**：输入/输出设备与存储器之间的数据传送通过运算器完成。
     5.   是**单处理机**。
     6.   基本⼯作⽅式是**控制流驱动⽅式**。
3.   计算机的功能部件：输入设备、存储器、运算器、控制器、输出设备。
     1.   主存储器$MM(Main\,Memory)$
          1.   地址寄存器$MAR$：$MAR$位数同PC，由存储单元的个数决定
          2.   数据寄存器$MDR$：$MDR$位数$=$存储字长
     2.   运算器：运算器（用于实现算术运算（加减乘除）、逻辑运算（与或非运算等）
          1.   累加寄存器$ACC(Accumulator)$：用于存放操作数，或运算结果。
          2.   乘商寄存器$MQ(Multiplier-Quotient\,Register)$：在乘、除运算时，用于存放操作数或运算结果。
          3.   通用寄存器组$GR$（$General\;Register$）：用于存放操作数
          4.   算术逻辑单元$ALU(Arithmetic\,Logic\,Unit)$：通过内部复杂的电路实现算数运算、逻辑运算
     3.   控制器：$PC$(取指令)$\to$$IR$(分析指令)$\to$$CU$(执行指令)
          1.   控制单元$CU(Control\,Unit)$：分析指令，给出控制信号
          2.   指令寄存器$IR(Instruction\,Register)$：存放当前执行的指令

          3.   程序计数器$PC(Program\,Counter)$：存放下一条指令地址，有自动加1功能
4.   计算机系统层次结构：高三层（高级语言层、汇编语言层、操作系统机器层）属于软件层；低两层（传统机器层、微指令层）属于硬件层。
     1.   高级语言层：面向用户，必须用编译程序（编译器或解释器）翻译成汇编语言程序。
     2.   汇编语言层：不能直接运行汇编语言，必须用汇编程序（汇编器）翻译成机器语言程序，所以是虚拟的。汇编语言与机器语言一一对应。
     3.   操作系统机器层：由操作系统程序实现，向上提供“广义指令”即系统调用。也称为混合层。
     4.   传统机器层（指令集架构层，$ISA$）：执行二进制机器指令，微程序解释机器执行微指令。
     5.   微指令层：由硬件直接执行微指令。只有微程序设计的计算机系统才有这一层。

### 计算机软件

1.   系统软件和应用软件
     1.   系统软件：操作系统$OS$、数据库管理系统$DBMS$、语言处理系统、分布式软件系统、网络软件系统、标准库程序、服务性程序等。编译器、解释器等。
     2.   应用软件：如各种科学计算类程序、工程设计类程序、数据统计与处理程序等。办公套件、媒体播放器、网络浏览器等
2.   三种语言：机器语言、汇编语言、高级语言。其中机器语言是唯一可以被计算机识别和执行的语言。
3.   三种翻译程序：
     1.   汇编程序/汇编器：将汇编语言程序翻译成机器语言程序。汇编语⾔$\to$机器语言
     2.   解释程序/解释器：将源程序中的语句按执行顺序逐条翻译成机器指令并执行。边解释边执行，不生成目标程序。
     3.   编译程序/编译器：将高级语言翻译成汇编语言或机器语言程序。必须先将源程序全部翻译成目标程序才能运行，只需翻译一次。⾼级语⾔$\to$汇编语⾔$\to$机器语⾔
4.   软硬件逻辑等价性：对某一功能来说，在分别通过软硬件实现在功能上完全等效，不同的只是执行时间的长短而已，显然**硬件实现的性能要优于软件实现的性能**。
5.   ※源程序转换为可执行目标文件：**预处理、编译、汇编、链接**。

### ※※※计算机性能指标和评价

#### ※※※三种字长和存储单元个数

1.   **字长/机器字长**：在通常所说的“某16位或32位机器”中，16和32指的是字长，也称机器字长。
     1.   所谓字长，通常是指$CPU$内部**用于运算**的数据通路的宽度。
     2.   **决定虚拟地址的长度、算术逻辑单元$ALU$和通用寄存器位数**。
2.   **存储字长**：一个存储单元存储的二进制代码的长度。
     +   **决定存储器的大小/位数、数据寄存器$MDR$的位数**。
3.   **指令字长**：一个指令字中包含的二进制代码的位数。
     +   若指令字长等于存储字长的$n$倍，则需要$n$个访存周期来取出一条指令。
     +   与机器字长没有必然的联系，实际上取决于操作码长度、地址码长度和地址码个数，但一般取字节或存储字长的整数倍。
     +   **决定指令寄存器$IR$位数**。

---

4.   存储单元个数：主存中存储单元的个数。
     +   **决定程序计数器$PC$、地址寄存器$MAR$位数，地址总线根数**。

#### ※※K的换算

1.   在描述**存储容量、文件大小**等时，$K=2^{3}、M=2^{6}、G=2^{9}、T=2^{12}$通常用$2$的幂次表示
     +   计算机内部的$K$基本都表示$1024$
2.   在描达**速率、频率**等时，$k、M、G、T$通常用$10$的幂次表示
     +   $CO$中总线的数据传输率/总线带宽表示$1000$，这边建议看到题上给的数据不是$2$的整数次幂就应该知道用$10$的幂次表示了

#### ※※四个周期

1.   时钟周期/节拍/$T$周期：通常称为节拍或$T$周期，它是$CPU$操作的最基本单位，**时钟周期不变**。
2.   机器周期：通过一次总线事务访问一次主存或 $I/O$的时间定为一个机器周期。**机器周期可变**。
     +   由于$CPU$内部操作的速度较快，而$CPU$访问一次存储器的时间较长，因此机器周期通常由存取周期来确定，往往是通过一次总线事务访问一次主存或$I/O$的时间
3.   指令周期：$CPU$从主存中每取出并执行一条指令所需的全部时间，**指令周期可变**。
4.   存取周期：指存储器进行两次独立的存储器操作（连续两次读或写操作）所需的最小间隔时间。存取周期往往为固定值。

#### ※※基本计算

1.   主频$f=\dfrac{1}{T}$，其中$T$为时钟周期

2. 执行指令（平均）所需时钟周期数$CPI(Clock\,cycle\,Per\,Instruction)$：其中$IC$为总指令条数，$m$​为执行所需时钟周期数。
    $$
    CPI=\dfrac{m}{IC}
    $$

3. 如果对于多类指令计算程序的$CPI$：$P_i$每类指令的使用频率；$CPI_i$每类指令的$CPI$；$IC_i$每类指令的条数
    $$
    \mathrm{CPI}=\sum_{i=1}^{n}\left(\mathrm{CPI}_{i} \times P_{i}\right)=\sum_{i=1}^{n}\left(\mathrm{CPI}_{i} \times \frac{\mathrm{IC}_{i}}{\mathrm{IC}}\right)
    $$

4. $CPU$时间$T_{\text {cpu}}$：执行程序一共需要多少时间
    $$
    T_{\text {cpu}}=m \times T\Longrightarrow 
    T_{\text {cpu}}=\mathrm{CPI} \times \mathrm{IC} \times T=\dfrac{\mathrm{CPI} \times \mathrm{IC}}{f}
    $$

5. 每时钟周期执行指令条数$IPC(Instructions\, Per\, Cycle)$：每个时钟周期$CPU$能执行的指令条数，是$CPI$​的倒数。
    $$
    IPC=\dfrac{1}{CPI}
    $$

6. 每秒执行多少百万条指令$MIPS(Million\,Instructions\,Per\,Second)$：其中$M=10^6$；$IC$为总指令条数。
    $$
    MIPS=\dfrac{IC}{T_{\text {cpu}}\times 10^{6}}
    $$

    一般题上只会给出$CPI$，则有：其中$CPI$为执行指令（平均）所需时钟周期数
    $$
    MIPS=\dfrac{f}{CPI\times 10^6}
    $$

7. 带宽：数据总线一次所能并行传送信息的位数：总线宽度乘主线时钟频率；总线宽度除以主线时钟周期。

8. 每秒执⾏浮点运算次数$FLOPS(Floating-point\; Operations\; Per \;Second)$：分类有$MFLOPS$、$GFLOPS$、$TFLOPS$、$PFLOPS$、$EFLOPS$、$ZFLOPS$。

    +   $Kilo$：$k=10^3$ 、$Mega$：$M=10^6$、$Giga$：$G=10^9$、$Tera$：$T=10^{12}$ 、$Peta$：$P=10^{15}$、$Exa$：$E=10^{18}$ 、$Zetta$：$Z=10^{21}$


#### 系统整体的性能指标和几个专业术语

系统整体的性能指标

1.   数据通路带宽：数据总线一次所能并行传送信息的位数（各硬件部件通过数据总线传输数据）
2.   吞吐量：指系统在单位时间内处理请求的数量。**系统吞吐量主要取决于主存的存取周期**。
3.   响应时间：指从用户向计算机发送一个请求，到系统对该请求做出响应并获得它所需要的结果的等待时间。

---

专业术语

1.   系列机：具有基本相同的体系结构，使用相同基本指令系统的多个不同型号的计算机组成的一个产品系列。
2.   兼容：指软件或硬件的通用性，即运行在某个型号的计算机系统中的**硬件或软件**也能应用于**另一个型号**的计算机系统时，称这两台计算机在硬件或软件上存在兼容性。
3.   软件可移植性：指把使用在某个系列计算机中的软件直接或进行很少的修改就能运行在另一个系列计算机中的可能性。
4.   固件：将程序固化在ROM中组成的部件称为固件。固件是一种具有软件特性的硬件，执行速度快于软件，灵活性优于硬件，是软/硬件结合的产物。
     +   例如，目前操作系统己实现了部分固化（把软件永恒地存储于$ROM$中）